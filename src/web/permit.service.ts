import { Injectable, InternalServerErrorException, Logger } from "@nestjs/common";
import { AmoService } from "../amo/amo.service";
import { ConfigService } from "@nestjs/config";

export type RequestPermitCustomer = {
  lead_id: number;
  date: string; // YYYY-MM-DD
  first: string;
  middle: string;
  last: string;
};

export type RequestPermitAuto = {
  date: string; // YYYY-MM-DD
  first: string;
  middle: string;
  last: string;
  model: string;
  code: string;
};

function today(): string {
  const date = new Date();
  return `${(date.getMonth() + 1).toString().padStart(2, "0")}/${date
    .getDate()
    .toString()
    .padStart(2, "0")}/${date.getFullYear()}`;
}

@Injectable()
export class PermitService {
  protected readonly logger: Logger = new Logger(PermitService.name);
  private readonly auth: string;

  constructor(
    private readonly config: ConfigService,
    private readonly amo: AmoService,
  ) {
    this.auth = `Basic ${Buffer.from(`${config.get<string>("PERMIT_LOGIN")}:${config.get<string>("PERMIT_PASSWORD")}`).toString("base64")}`;
  }

  async handlerPermitCustomer(data: RequestPermitCustomer) {
    try {
      await this.permitCustomer(data);

      await this.amo.client.note.addNotes("leads", [
        {
          entity_id: data.lead_id,
          note_type: "common",
          params: {
            text: `✅ Пропуск: Пропуск заказан для ${data.last} ${data.first} ${data.middle} на ${data.date}`,
          },
        },
      ]);
      this.logger.log(`USERSCRIPT_PERMIT, lead_id: ${data.lead_id}, date: ${data.date}`);
    } catch (e) {
      await this.amo.client.note.addNotes("leads", [
        {
          entity_id: data.lead_id,
          note_type: "common",
          params: {
            text: `❌ Пропуск: Не удалось заказать пропуск для ${data.last} ${data.first} ${data.middle} на ${data.date}`,
          },
        },
      ]);

      this.logger.error(`USERSCRIPT_PERMIT, lead_id: ${data.lead_id}, date: ${data.date}`);
      throw new InternalServerErrorException(e);
    }
  }

  async handlerPermitAuto(data: RequestPermitAuto) {
    try {
      await this.permitAuto(data);
      this.logger.log(`TELEGRAM_PERMIT, auto ${data.model} ${data.code}, date: ${data.date}`);
    } catch (e) {
      this.logger.error(`TELEGRAM_PERMIT, auto ${data.model} ${data.code}, date: ${data.date}`);
      throw new InternalServerErrorException(e);
    }
  }

  async permitCustomer({
    lead_id: _,
    date,
    first,
    middle,
    last,
  }: RequestPermitCustomer): Promise<void> {
    const [year, month, day] = date.split("-");
    const today_date = today();

    const body = `------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__EVENTTARGET"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__EVENTARGUMENT"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CropImg_url"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_FilePhoto_ClientState"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_FileScan_ClientState"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__VIEWSTATE"

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BQICHwllHwpnFCsAARYIHwEFRdC+0YIgMTAg0LTQviAyMCDRgi4gKNC60YDRg9C/0L3QvtGC0L7QvdC90LDQttC90YvQuSDQs9GA0YPQt9C+0LLQuNC6KR8FAgMfCWUfCmcUKwABFggfAQUc0YHQstGL0YjQtSAyMCDRgi4gKNGE0YPRgNCwKR8FAgQfCWUfCmdkZGRkAnUPZBYCZg9kFgQCAw8PFgIfCWVkZAILD2QWAgIBD2QWAmYPFgQeAmlkBSFjdGwwMF9QYWdlQ29udGVudF9GaWxlUGhvdG9fY3RsMDIeBXN0eWxlBQx3aWR0aDoyNTBweDtkAncPZBYCZg9kFgICAQ9kFgICAQ9kFgJmDxYEHw0FIGN0bDAwX1BhZ2VDb250ZW50X0ZpbGVTY2FuX2N0bDAyHw4FDHdpZHRoOjMwNnB4O2QCeQ88KwAFAQAPFgQfBQURaW5mb0BnZXJkYS5tc2sucnUfA2dkZAJ/DzwrAAUBAA8WBB8FBQ83KDQ5NSk5OTUtNTgtMjgfA2dkZAKDAQ88KwARAwAPFgQeC18hRGF0YUJvdW5kZx4LXyFJdGVtQ291bnRmZAEQFgAWABYADBQrAABkAosBDw9kDxAWAWYWARYCHwxkFgECA2RkAgUPZBYCAgEPZBYCAgMPZBYGAgEPDxYCHwEFBys3IDQ5NSBkZAIDDw8WAh8BBQg2NjUtNTg2M2RkAgUPDxYCHwEFNNCj0J/QoNCQ0JLQm9Cv0K7QqdCQ0K8g0JrQntCc0J/QkNCd0JjQryDQn9Ce0JzQntCp0KxkZBgCBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WDwUhY3RsMDAkUGFnZUNvbnRlbnQkQ21iUGFzc1R5cGUkREREBSNjdGwwMCRQYWdlQ29udGVudCRDbWJQZXJzb25UeXBlJERERAUiY3RsMDAkUGFnZUNvbnRlbnQkRGJ4QmlydGhEYXRlJERERAUoY3RsMDAkUGFnZUNvbnRlbnQkRGJ4QmlydGhEYXRlJERERCRDJEZOUAUgY3RsMDAkUGFnZUNvbnRlbnQkQ21iRG9jVHlwZSREREQFIGN0bDAwJFBhZ2VDb250ZW50JFRieERvY0RhdGUkREREBSZjdGwwMCRQYWdlQ29udGVudCRUYnhEb2NEYXRlJERERCRDJEZOUAUjY3RsMDAkUGFnZUNvbnRlbnQkQ21iQWNjZXNzVHlwZSREREQFHWN0bDAwJFBhZ2VDb250ZW50JENtYk1hcmskREREBSZjdGwwMCRQYWdlQ29udGVudCRDbWJDYXJOdW1iZXJUeXBlJERERAUgY3RsMDAkUGFnZUNvbnRlbnQkQ21iQ2FyVHlwZSREREQFImN0bDAwJFBhZ2VDb250ZW50JENtYkNhcldlaWdodCREREQFG2N0bDAwJFBhZ2VDb250ZW50JEZpbGVQaG90bwUaY3RsMDAkUGFnZUNvbnRlbnQkRmlsZVNjYW4FMGN0bDAwJFBhZ2VDb250ZW50JEd2UGFzc2VuZ2VycyRjdGwwMiRjbWRBZGRFbXB0eQUeY3RsMDAkUGFnZUNvbnRlbnQkR3ZQYXNzZW5nZXJzDzwrAAwBCGZkZKlpyNAp1eYQQbLzydCeyFlDMA9Q/UPwtaGcNyY8YMo=
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__VIEWSTATEGENERATOR"

9B8E9023
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__SCROLLPOSITIONX"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="__SCROLLPOSITIONY"

300
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$HfPassType"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$HfUserComplex"

8
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$HfUserEppCustomer"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$HfSelectedDates"

${day}.${month}.${year}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxFirstName"

${last}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxSecondName"

${first}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxMiddleName"

${middle}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_VI"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbPassType"

разовый пропуск на посетителя
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDDWS"

0:0:12000:449:669:0:-10000:-10000
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LDeletedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LInsertedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LCustomCallback"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbPassType$DDD$L"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxBuilding"

11
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxFloor"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxOffice"

203
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxWay"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPersonType_VI"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbPersonType"

посетитель
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbPersonType_DDDWS"

0:0:12000:449:903:0:-10000:-10000
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbPersonType$DDD$L"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_Raw"

N
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$DbxBirthDate"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_DDD_C_FNPWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$DbxBirthDate$DDD$C"

${today_date}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbDocType_VI"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbDocType"

---выберите---
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbDocType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbDocType$DDD$L"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocSeriya"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocNumber"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocOrg"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_Raw"

N
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocDate"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_DDD_C_FNPWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocDate$DDD$C"

${today_date}
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocAddress"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_VI"

1012
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbAccessType"

- категория отсутствует -
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LDeletedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LInsertedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LCustomCallback"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbAccessType$DDD$L"

1012
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxAccessDescription"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbMark_VI"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbMark"

- нет -
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbMark_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbMark$DDD$L"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxMarkDescription"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxCarMark"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarNumberType_VI"

RUS
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarNumberType"

Российский
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarNumberType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarNumberType$DDD$L"

RUS
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxCarNumber"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_VI"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarType"

Легковой
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LDeletedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LInsertedItems"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LCustomCallback"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarType$DDD$L"

2
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarWeight_VI"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarWeight"

-- Выберите --
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarWeight_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarWeight$DDD$L"

0
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$FilePhoto$ctl00"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$FilePhoto$ctl02"; filename=""
Content-Type: application/octet-stream


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$FileScan$ctl00"


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$FileScan$ctl02"; filename=""
Content-Type: application/octet-stream


------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxEmail"

info@gerda.msk.ru
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$TbxPhone"

7(495)995-58-28
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="ctl00$PageContent$btnAddOrder"

Добавить заявку
------WebKitFormBoundaryjBIZrp196wUWad2e
Content-Disposition: form-data; name="DXScript"

1_49,2_14,2_13,2_8,1_46,1_29,2_11,1_42,2_7
------WebKitFormBoundaryjBIZrp196wUWad2e--`;

    const session_id = await this.getSessionId();
    await this.newOrderRequest(body, session_id, "----WebKitFormBoundaryjBIZrp196wUWad2e");
  }

  private async permitAuto({
    date,
    first,
    middle,
    last,
    model,
    code,
  }: RequestPermitAuto): Promise<void> {
    const [year, month, day] = date.split("-");
    const today_date = today();

    const body = `------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__EVENTTARGET"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__EVENTARGUMENT"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CropImg_url"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_FilePhoto_ClientState"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_FileScan_ClientState"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__VIEWSTATE"

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BQICHwllHwpnFCsAARYIHwEFRdC+0YIgMTAg0LTQviAyMCDRgi4gKNC60YDRg9C/0L3QvtGC0L7QvdC90LDQttC90YvQuSDQs9GA0YPQt9C+0LLQuNC6KR8FAgMfCWUfCmcUKwABFggfAQUc0YHQstGL0YjQtSAyMCDRgi4gKNGE0YPRgNCwKR8FAgQfCWUfCmdkZGRkAnUPZBYCZg9kFgQCAw8PFgIfCWVkZAILD2QWAgIBD2QWAmYPFgQeAmlkBSFjdGwwMF9QYWdlQ29udGVudF9GaWxlUGhvdG9fY3RsMDIeBXN0eWxlBQx3aWR0aDoyNTBweDtkAncPZBYCZg9kFgICAQ9kFgICAQ9kFgJmDxYEHw0FIGN0bDAwX1BhZ2VDb250ZW50X0ZpbGVTY2FuX2N0bDAyHw4FDHdpZHRoOjMwNnB4O2QCeQ88KwAFAQAPFgQfBQURaW5mb0BnZXJkYS5tc2sucnUfA2dkZAJ/DzwrAAUBAA8WBB8FBQ83KDQ5NSk5OTUtNTgtMjgfA2dkZAKDAQ88KwARAwAPFgQeC18hRGF0YUJvdW5kZx4LXyFJdGVtQ291bnRmZAEQFgAWABYADBQrAABkAosBDw9kDxAWAWYWARYCHwxkFgECA2RkAgUPZBYCAgEPZBYCAgMPZBYGAgEPDxYCHwEFBys3IDQ5NSBkZAIDDw8WAh8BBQg2NjUtNTg2M2RkAgUPDxYCHwEFNNCj0J/QoNCQ0JLQm9Cv0K7QqdCQ0K8g0JrQntCc0J/QkNCd0JjQryDQn9Ce0JzQntCp0KxkZBgCBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WDwUhY3RsMDAkUGFnZUNvbnRlbnQkQ21iUGFzc1R5cGUkREREBSNjdGwwMCRQYWdlQ29udGVudCRDbWJQZXJzb25UeXBlJERERAUiY3RsMDAkUGFnZUNvbnRlbnQkRGJ4QmlydGhEYXRlJERERAUoY3RsMDAkUGFnZUNvbnRlbnQkRGJ4QmlydGhEYXRlJERERCRDJEZOUAUgY3RsMDAkUGFnZUNvbnRlbnQkQ21iRG9jVHlwZSREREQFIGN0bDAwJFBhZ2VDb250ZW50JFRieERvY0RhdGUkREREBSZjdGwwMCRQYWdlQ29udGVudCRUYnhEb2NEYXRlJERERCRDJEZOUAUjY3RsMDAkUGFnZUNvbnRlbnQkQ21iQWNjZXNzVHlwZSREREQFHWN0bDAwJFBhZ2VDb250ZW50JENtYk1hcmskREREBSZjdGwwMCRQYWdlQ29udGVudCRDbWJDYXJOdW1iZXJUeXBlJERERAUgY3RsMDAkUGFnZUNvbnRlbnQkQ21iQ2FyVHlwZSREREQFImN0bDAwJFBhZ2VDb250ZW50JENtYkNhcldlaWdodCREREQFG2N0bDAwJFBhZ2VDb250ZW50JEZpbGVQaG90bwUaY3RsMDAkUGFnZUNvbnRlbnQkRmlsZVNjYW4FMGN0bDAwJFBhZ2VDb250ZW50JEd2UGFzc2VuZ2VycyRjdGwwMiRjbWRBZGRFbXB0eQUeY3RsMDAkUGFnZUNvbnRlbnQkR3ZQYXNzZW5nZXJzDzwrAAwBCGZkZKlpyNAp1eYQQbLzydCeyFlDMA9Q/UPwtaGcNyY8YMo=
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__VIEWSTATEGENERATOR"

9B8E9023
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__SCROLLPOSITIONX"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="__SCROLLPOSITIONY"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$HfPassType"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$HfUserComplex"

8
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$HfUserEppCustomer"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$HfSelectedDates"

${day}.${month}.${year}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxFirstName"

${last}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxSecondName"

${first}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxMiddleName"

${middle}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_VI"

4
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbPassType"

разовый пропуск на автотранспорт
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDDWS"

0:0:12000:869:669:0:-10000:-10000
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LDeletedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LInsertedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPassType_DDD_LCustomCallback"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbPassType$DDD$L"

4
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxBuilding"

11
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxFloor"

2
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxOffice"

203
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxWay"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPersonType_VI"

1
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbPersonType"

сотрудник
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbPersonType_DDDWS"

0:0:12000:869:903:0:-10000:-10000
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbPersonType$DDD$L"

1
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_Raw"

N
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$DbxBirthDate"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_DbxBirthDate_DDD_C_FNPWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$DbxBirthDate$DDD$C"

${today_date}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbDocType_VI"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbDocType"

---выберите---
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbDocType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbDocType$DDD$L"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocSeriya"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocNumber"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocOrg"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_Raw"

N
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocDate"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_TbxDocDate_DDD_C_FNPWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocDate$DDD$C"

${today_date}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxDocAddress"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_VI"

1012
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbAccessType"

- категория отсутствует -
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LDeletedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LInsertedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbAccessType_DDD_LCustomCallback"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbAccessType$DDD$L"

1012
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxAccessDescription"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbMark_VI"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbMark"

- нет -
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbMark_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbMark$DDD$L"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxMarkDescription"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxCarMark"

${model}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarNumberType_VI"

RUS
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarNumberType"

Российский
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarNumberType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarNumberType$DDD$L"

RUS
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxCarNumber"

${code}
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_VI"

2
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarType"

Легковой
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LDeletedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LInsertedItems"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarType_DDD_LCustomCallback"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarType$DDD$L"

2
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarWeight_VI"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarWeight"

-- Выберите --
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00_PageContent_CmbCarWeight_DDDWS"

0:0:-1:0:0:0:0:0:
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$CmbCarWeight$DDD$L"

0
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$FilePhoto$ctl00"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$FilePhoto$ctl02"; filename=""
Content-Type: application/octet-stream


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$FileScan$ctl00"


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$FileScan$ctl02"; filename=""
Content-Type: application/octet-stream


------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxEmail"

info@gerda.msk.ru
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$TbxPhone"

7(495)995-58-28
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="ctl00$PageContent$btnAddOrder"

Добавить заявку
------WebKitFormBoundaryiswg4iQLZrM5jNRa
Content-Disposition: form-data; name="DXScript"

1_49,2_14,2_13,2_8,1_46,1_29,2_11,1_42,2_7
------WebKitFormBoundaryiswg4iQLZrM5jNRa--`;

    const session_id = await this.getSessionId();
    await this.newOrderRequest(body, session_id, "----WebKitFormBoundaryiswg4iQLZrM5jNRa");
  }

  private async getSessionId(): Promise<string> {
    const main = await fetch("https://2an.ru/", {
      method: "GET",
      signal: AbortSignal.timeout(10000),
      headers: {
        Authorization: this.auth,
      },
    });

    return main.headers.getSetCookie()[0].split(";")[0];
  }

  private async newOrderRequest(body: string, session_id: string, boundary: string): Promise<void> {
    const res = await fetch("https://2an.ru/new_order.aspx", {
      method: "POST",
      signal: AbortSignal.timeout(10000),
      headers: {
        Cookie: session_id,
        Accept:
          "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
        "Accept-Encoding": "gzip, deflate, br, zstd",
        "Accept-Language": "ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7",
        Authorization: this.auth,
        "Cache-Control": "no-cache",
        Connection: "keep-alive",
        "Content-Length": Buffer.byteLength(body).toString(),
        "Content-Type": `multipart/form-data; boundary=${boundary}`,
        Host: "2an.ru",
        Origin: "https://2an.ru",
        Pragma: "no-cache",
        Referer: "https://2an.ru/new_order.aspx",
        "Sec-Fetch-Dest": "document",
        "Sec-Fetch-Mode": "navigate",
        "Sec-Fetch-Site": "same-origin",
        "Sec-Fetch-User": "?1",
        "Sec-GPC": "1",
        "Upgrade-Insecure-Requests": "1",
        "User-Agent":
          "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36",
        "sec-ch-ua": '"Not;A=Brand";v="99", "Google Chrome";v="139", "Chromium";v="139"',
        "sec-ch-ua-mobile": "?0",
        "sec-ch-ua-platform": "Windows",
      },
      body: body,
    });

    if (!res.ok) throw new Error("Failed to add permit");
  }
}
